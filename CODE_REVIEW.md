# Code Review — лендинг «Промптинг для менеджеров»

**Ревьюер:** Senior-разработчик  
**Дата:** февраль 2026  
**Стек:** Next.js 15, React 19, TypeScript, Tailwind CSS, статический экспорт (FTP на Reg.ru)

---

## 1. Общая оценка

Проект — одностраничный лендинг с формой заявки, офертой и политикой конфиденциальности. Код аккуратный, структура понятная, для целевой задачи реализация адекватная. Критичных проблем нет; есть точечные улучшения по безопасности, доступности и поддерживаемости.

**Вердикт:** код готов к продакшену при учёте рекомендаций ниже.

---

## 2. Архитектура и структура

**Плюсы:**
- Чёткое разделение: `app/` (страницы, layout), `components/`, `config/`, `data/`.
- Контент вынесен в `data/` (faq, testimonials, course, lessons и т.д.) — правки текстов без копания в компонентах.
- Единая точка конфигурации в `config/constants.ts`.
- Использование `@/` алиасов, читаемые имена файлов и компонентов.

**Замечания:**
- Главная страница (`page.tsx`) объявлена как `"use client"` из-за импорта клиентских компонентов; при желании можно оставить layout/server по умолчанию и подключать клиентские блоки точечно (сейчас не обязательно).
- Часть компонентов в `components/` используются только на главной — можно держать и так, либо вынести в `app/components/` с явным указанием в комментарии, что это страничные компоненты.

---

## 3. Безопасность

**Плюсы:**
- Нет `dangerouslySetInnerHTML` с пользовательским вводом. В `CourseSchema.tsx` используется только для JSON-LD из констант — ок.
- Секреты не захардкожены: Formspree ID в константах (допустимо для клиента), Turnstile/Formspree ключи через env. `.env` и `.env*.local` в `.gitignore`.
- Форма: honeypot (чекбокс), валидация имени (длина, символы, повторяющиеся буквы), опционально Turnstile; отправка на Formspree — без своего бэкенда, риски перенесены на провайдера.
- Статический экспорт — нет серверного рантайма и своих API, поверхность атаки минимальна.

**Рекомендации:**
- **FORMSPREE_FORM_ID** в `constants.ts` — по сути публичный идентификатор формы (он всё равно уходит в клиент). Если захотите развести окружения (тест/прод), можно оставить fallback из константы, но приоритетно брать `process.env.NEXT_PUBLIC_FORMSPREE_FORM_ID` в сборке (уже так в LeadForm).
- Внешние ссылки (Telegram, отзывы) везде с `rel="noopener noreferrer"` — хорошо; можно единообразно проверять, что все `target="_blank"` так и сделаны (сейчас в порядке).

---

## 4. Производительность

**Плюсы:**
- Статический экспорт — быстрая отдача, нет SSR-нагрузки на хостинге.
- Изображения в `public/images/` подключаются статически; в конфиге `images.unoptimized: true` — нормально для экспорта.
- Turnstile подгружается через `next/script` с `strategy="lazyOnload"`.
- В Testimonials есть учёт ширины окна и пагинация/скролл без лишних ререндеров.

**Замечания:**
- Hero и другие секции без явного lazy-load; при росте числа тяжёлых блоков можно обернуть ниже-fold секции в `dynamic(..., { loading: ... })` — для текущего объёма не обязательно.
- Шрифты: в `layout` нет явного подключения шрифтов из `fonts.ts`; если используются только системные — ок; иначе стоит проверить, что не блокируют рендер.

---

## 5. Доступность (a11y)

**Плюсы:**
- Семантика: `<main>`, `<nav>`, `<section>`, `<footer>`, заголовки по иерархии.
- У навигации и кнопок есть `aria-label` где нужно.
- У формы есть лейблы, связка label–input сохранена; honeypot скрыт через `aria-hidden="true"` и вынесен за экран.
- Тумблеры согласий с `role="switch"` и `aria-checked`.

**Рекомендации:**
- Navbar: кнопки навигации не ведут к якорям типа `#program` — только `scrollToSection`. Для клавиатуры и SEO можно оставить текущее поведение, но добавить скрытые якорные ссылки или дублировать навигацию ссылками с `href="#program"` и т.д., чтобы при отключённом JS или при «открыть в новой вкладке» поведение было предсказуемым.
- После успешной отправки формы фокус остаётся на кнопке; при желании можно переносить фокус на блок с сообщением «Заявка отправлена» для скринридеров.

---

## 6. Качество кода и поддерживаемость

**Плюсы:**
- TypeScript включён, `strict: true` в `tsconfig.json`.
- ESLint (next/core-web-vitals), сборка не игнорирует ошибки линта и типов.
- Имена компонентов и переменных осмысленные; повторяющиеся стили частично вынесены (например, `inputClass` в LeadForm).
- Ошибки в приложении перехватываются ErrorBoundary с понятным fallback.

**Замечания:**
- **Offer page:** жёсткое отключение копирования, контекстного меню и части горячих клавиш (F12, Ctrl+Shift+I и т.д.) — типичный «защитный» слой для оферты. С точки зрения UX это спорно (мешает людям с ограниченными возможностями и обычным пользователям); с юридической — решать вам. Код технически корректен.
- **LeadForm:** глобальный `window.onTurnstileSuccess` в `useEffect` — при нескольких формах на странице возможен конфликт; у вас одна форма — ок. Cleanup при размонтировании есть.
- Константы вроде `NAME_MIN_LENGTH`, `NAME_MAX_LENGTH`, `NAME_REGEX` в LeadForm можно вынести в `config/constants.ts` или в отдельный `lib/validation.ts`, если планируете переиспользовать валидацию имени где-то ещё.

---

## 7. Инфраструктура и деплой

**Плюсы:**
- GitHub Actions: checkout → Node → `npm install` → `npm run build` → FTP. Переменная `NEXT_PUBLIC_TURNSTILE_SITE_KEY` пробрасывается в шаг сборки через `vars.NEXT_PUBLIC_TURNSTILE_SITE_KEY`.
- `output: "export"` и `trailingSlash: true` согласованы с раздачей статики по FTP.

**Рекомендации:**
- В workflow нет кэширования `node_modules` (например, `actions/cache`) — при росте зависимостей можно добавить для ускорения сборки.
- Убедиться, что на Reg.ru включён HTTPS и редирект с HTTP на HTTPS.

---

## 8. Итоговый чек-лист

| Категория           | Оценка | Комментарий                                      |
|---------------------|--------|--------------------------------------------------|
| Архитектура         | ✅     | Структура понятная, данные отделены от UI       |
| Безопасность        | ✅     | Нет критичных дыр; форма и env настроены        |
| Производительность  | ✅     | Статика, ленивый скрипт Turnstile               |
| Доступность         | ⚠️     | В целом хорошо; есть мелкие улучшения по навигации |
| Типы и линт         | ✅     | Strict TS, ESLint не отключён при сборке        |
| Деплой и конфиг     | ✅     | Понятный пайплайн, переменные для капчи заданы   |

---

## 9. Рекомендации по приоритету

**Высокий приоритет (желательно):**
- Проверить HTTPS и редирект на продакшен-домене.

**Средний приоритет (по возможности):**
- Добавить кэш `node_modules` в GitHub Actions.
- Вынести константы валидации имени из LeadForm в config/lib при появлении второго использования.

**Низкий приоритет:**
- Улучшить навигацию для a11y (якоря/ссылки помимо scroll по клику).
- Опционально: после успешной отправки формы переносить фокус на сообщение об успехе.

Код в текущем виде можно считать готовым к продакшену; перечисленные пункты — точечные улучшения, а не блокеры.
